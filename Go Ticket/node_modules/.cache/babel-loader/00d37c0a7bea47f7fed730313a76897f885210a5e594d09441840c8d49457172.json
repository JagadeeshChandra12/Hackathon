{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rayan\\\\Downloads\\\\Go Ticket\\\\src\\\\pages\\\\Home.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from '../supabaseClient';\nimport { Button, Typography, Box, Container } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Home() {\n  _s();\n  const [user, setUser] = useState(null);\n  const [profile, setProfile] = useState(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    // Check active sessions and sets the user\n    supabase.auth.getSession().then(({\n      data: {\n        session\n      }\n    }) => {\n      var _session$user;\n      setUser((_session$user = session === null || session === void 0 ? void 0 : session.user) !== null && _session$user !== void 0 ? _session$user : null);\n      if (session !== null && session !== void 0 && session.user) {\n        fetchProfile(session.user.id);\n      }\n    });\n\n    // Listen for changes on auth state\n    const {\n      data: {\n        subscription\n      }\n    } = supabase.auth.onAuthStateChange((_event, session) => {\n      var _session$user2;\n      setUser((_session$user2 = session === null || session === void 0 ? void 0 : session.user) !== null && _session$user2 !== void 0 ? _session$user2 : null);\n      if (session !== null && session !== void 0 && session.user) {\n        fetchProfile(session.user.id);\n      }\n    });\n    return () => subscription.unsubscribe();\n  }, []);\n  const fetchProfile = async userId => {\n    const {\n      data,\n      error\n    } = await supabase.from('profiles').select('*').eq('id', userId).single();\n    if (error) {\n      console.error('Error fetching profile:', error);\n    } else {\n      setProfile(data);\n    }\n  };\n  const handleLogout = async () => {\n    await supabase.auth.signOut();\n    navigate('/login');\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"md\",\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mt: 8,\n        textAlign: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        component: \"h1\",\n        gutterBottom: true,\n        children: \"Welcome to Go Ticket\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), user ? /*#__PURE__*/_jsxDEV(Box, {\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          gutterBottom: true,\n          children: [\"Logged in as: \", (profile === null || profile === void 0 ? void 0 : profile.full_name) || user.email]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: handleLogout,\n          sx: {\n            mt: 2\n          },\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Box, {\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          gutterBottom: true,\n          children: \"Please login to continue\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: () => navigate('/login'),\n          sx: {\n            mt: 2,\n            mr: 2\n          },\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outlined\",\n          color: \"primary\",\n          onClick: () => navigate('/register'),\n          sx: {\n            mt: 2\n          },\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n}\n_s(Home, \"YXvzI0lxznuBYL7zrt30cbxCoCY=\", false, function () {\n  return [useNavigate];\n});\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","supabase","Button","Typography","Box","Container","jsxDEV","_jsxDEV","Home","_s","user","setUser","profile","setProfile","navigate","auth","getSession","then","data","session","_session$user","fetchProfile","id","subscription","onAuthStateChange","_event","_session$user2","unsubscribe","userId","error","from","select","eq","single","console","handleLogout","signOut","maxWidth","children","sx","mt","textAlign","variant","component","gutterBottom","fileName","_jsxFileName","lineNumber","columnNumber","full_name","email","color","onClick","mr","_c","$RefreshReg$"],"sources":["C:/Users/rayan/Downloads/Go Ticket/src/pages/Home.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from '../supabaseClient';\nimport { Button, Typography, Box, Container } from '@mui/material';\n\nfunction Home() {\n  const [user, setUser] = useState(null);\n  const [profile, setProfile] = useState(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    // Check active sessions and sets the user\n    supabase.auth.getSession().then(({ data: { session } }) => {\n      setUser(session?.user ?? null);\n      if (session?.user) {\n        fetchProfile(session.user.id);\n      }\n    });\n\n    // Listen for changes on auth state\n    const { data: { subscription } } = supabase.auth.onAuthStateChange((_event, session) => {\n      setUser(session?.user ?? null);\n      if (session?.user) {\n        fetchProfile(session.user.id);\n      }\n    });\n\n    return () => subscription.unsubscribe();\n  }, []);\n\n  const fetchProfile = async (userId) => {\n    const { data, error } = await supabase\n      .from('profiles')\n      .select('*')\n      .eq('id', userId)\n      .single();\n\n    if (error) {\n      console.error('Error fetching profile:', error);\n    } else {\n      setProfile(data);\n    }\n  };\n\n  const handleLogout = async () => {\n    await supabase.auth.signOut();\n    navigate('/login');\n  };\n\n  return (\n    <Container maxWidth=\"md\">\n      <Box sx={{ mt: 8, textAlign: 'center' }}>\n        <Typography variant=\"h4\" component=\"h1\" gutterBottom>\n          Welcome to Go Ticket\n        </Typography>\n        {user ? (\n          <Box>\n            <Typography variant=\"body1\" gutterBottom>\n              Logged in as: {profile?.full_name || user.email}\n            </Typography>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={handleLogout}\n              sx={{ mt: 2 }}\n            >\n              Logout\n            </Button>\n          </Box>\n        ) : (\n          <Box>\n            <Typography variant=\"body1\" gutterBottom>\n              Please login to continue\n            </Typography>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={() => navigate('/login')}\n              sx={{ mt: 2, mr: 2 }}\n            >\n              Login\n            </Button>\n            <Button\n              variant=\"outlined\"\n              color=\"primary\"\n              onClick={() => navigate('/register')}\n              sx={{ mt: 2 }}\n            >\n              Register\n            </Button>\n          </Box>\n        )}\n      </Box>\n    </Container>\n  );\n}\n\nexport default Home; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}